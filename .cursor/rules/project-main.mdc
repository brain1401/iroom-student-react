---
description: "AI coding assistant rules for iroom-student React project - strict development patterns"
alwaysApply: true
---

> üí° **Note**: ÏûêÏÑ∏Ìïú ÌîÑÎ°úÏ†ùÌä∏ Î¨∏ÏÑúÏôÄ ÌåÄ Í∞ÄÏù¥ÎìúÎäî `docs/README.md`Î•º Ï∞∏Ï°∞ÌïòÏÑ∏Ïöî.

# iroom-student React Project Development Rules

You are a professional developer working on the iroom-student React project. Strictly follow these rules.

## üéØ Core Tech Stack

- **React 19** + **TypeScript** (strict mode)
- **TanStack Start** (SSR) + **TanStack Router** (file-based routing)
- **Jotai** (state management) + **TanStack Query** (server state)
- **Tailwind CSS v4** + **shadcn/ui** components
- **npm** (package manager - development port 3011)

## üìù Coding Conventions

### Comment Standards
- **Korean noun-form comments** (no honorifics) for Korean-specific explanations
- **TSDoc format** required for all functions/components/types
- Detailed explanations accessible to React beginners
- Always include purpose and examples for functions/components/types

### Type Definitions
- **Always use `type`** (NEVER use `interface`)
- Complete type definitions for all API responses and Props
- TSDoc comments explaining each field

```typescript
// ‚úÖ Correct example
type ExamCardProps = {
  /** Exam name */
  name: string;
  /** Exam API URL */
  url: string;
};

// ‚ùå Forbidden
interface ExamCardProps {
  name: string;
}
```

### Import/Export Rules
- **Use absolute paths (`@/`) required**
- Import order: React ‚Üí external libraries ‚Üí internal modules ‚Üí relative paths
- **Prefer named exports** (minimize default exports)

## üèóÔ∏è Architecture Patterns

### Folder Structure Compliance
```
src/
‚îú‚îÄ‚îÄ api/[domain]/     # API functions
‚îú‚îÄ‚îÄ atoms/           # Jotai state management
‚îú‚îÄ‚îÄ components/      # React components
‚îú‚îÄ‚îÄ hooks/          # Custom hooks
‚îú‚îÄ‚îÄ routes/         # File-based routing
‚îî‚îÄ‚îÄ utils/          # Utility functions
```

### Component Writing Rules
- **Function components only** (class components absolutely forbidden)
- Extract complex logic into **custom hooks**
- **Conditional rendering order**: loading ‚Üí error ‚Üí empty state ‚Üí normal state

### API Client Usage
- **Must use `baseApiClient` or `authApiClient`**
- Direct `fetch()` usage absolutely forbidden
- Include error handling and type safety in all API functions

## üåê Data Fetching Pattern (Critical!)

### SSR with TanStack Start Required Pattern

**Follow Pokemon example exactly for this pattern:**

1. **Define loader in Route file:**
```typescript
export const Route = createFileRoute("/your-page/")({
  loader: async ({ context: { queryClient }, params, search }) => {
    // Prefetch data with TanStack Query
    await queryClient.ensureQueryData(
      yourDataQueryOptions(params)
    );
    return { preloadData: "any additional data" };
  },
  component: YourPageComponent,
});
```

2. **Define Query Options (Required):**
```typescript
// api/your-domain/query.ts
export const yourDataQueryOptions = (params: Params) => ({
  queryKey: ["your-domain", params],
  queryFn: () => fetchYourData(params),
  staleTime: 5 * 60 * 1000, // 5 minutes
  gcTime: 10 * 60 * 1000,   // 10 minutes
});
```

3. **Jotai + SSR Hydration:**
```typescript
// In component
import { useHydrateAtoms } from "jotai-ssr";

function YourPageComponent() {
  const { param } = Route.useParams();
  
  // SSR hydration (prevents flickering)
  useHydrateAtoms([[yourParamAtom, param]]);
  
  // Read data from atom
  const { data, isPending, isError } = useAtomValue(yourDataQueryAtom);
}
```

4. **Atom Definition:**
```typescript
// atoms/your-domain.ts
export const yourParamAtom = atom<string>("");

export const yourDataQueryAtom = atomWithQuery((get) => {
  const param = get(yourParamAtom);
  return yourDataQueryOptions(param);
});
```

### Error Handling Pattern
```typescript
if (isPending) return <YourLoadingSkeleton />;
if (isError) {
  logError(isError, "YourPageComponent");
  return <YourErrorComponent message={getErrorMessage(isError)} />;
}
```

## üé® Styling Rules

### Tailwind CSS Usage
- **Use `cn()` function for className combination**
- Always consider responsive design
- Support dark mode (`dark:` prefix)

### shadcn/ui Components
- Use shadcn/ui for basic UI components
- Use variant system for customization
- **Actively use asChild pattern**

```typescript
<Button variant="ghost" asChild>
  <Link to="/your-path">Link Button</Link>
</Button>
```

## üîß Development Tools

### npm Usage (Important!)
- `npm install` (install dependencies)
- `npm run dev` (development server on port 3011)
- `npm run test` (run tests)
- `npm run build` (build for production)
- `npm run lint` (lint and format code)

### Code Quality Checks
- Always run `npm run lint` after completing work
- Resolve all TypeScript errors required
- Resolve ESLint warnings recommended

## ‚ùå Absolutely Forbidden

1. **Using `interface`** ‚Üí Use `type` instead
2. **Class components** ‚Üí Use function components only
3. **Direct `fetch()` usage** ‚Üí Use API clients
4. **Relative path imports** ‚Üí Use `@/` absolute paths
5. **Using yarn/pnpm** ‚Üí Use npm
6. **Plain data fetching without SSR** ‚Üí Use TanStack Start loader + Jotai pattern

## üìã Development Checklist

When developing new features:
- [ ] Check existing patterns (especially Pokemon example)
- [ ] Follow domain-based folder structure
- [ ] Write TSDoc comments
- [ ] Apply SSR data fetching pattern
- [ ] Ensure type safety
- [ ] Include error handling
- [ ] Pass `npm run lint`
- [ ] Support responsive + dark mode

Strictly follow these rules to write consistent, high-quality code.